<style>
/* Enhanced Flying Item Animation */
.flying-item {
    position: fixed;
    z-index: 10000; /* Increased z-index to ensure it's above everything */
    transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    object-fit: contain;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    opacity: 1;
    pointer-events: none;
    /* Ensure smooth rendering */
    will-change: transform, opacity, width, height, left, top;
}

/* Add a subtle bounce effect to the cart icon when item arrives */
@keyframes cartBounce {
    0%, 20%, 60%, 100% { transform: scale(1); }
    40% { transform: scale(1.1); }
    80% { transform: scale(1.05); }
}

.cart-bounce {
    animation: cartBounce 0.6s ease;
}
</style>

<div class="bg-[#F5F5DC] py-10 px-4 sm:px-8 lg:px-12">

    <div class="max-w-7xl mx-auto flex flex-col lg:flex-row lg:justify-between lg:gap-10 mb-8">

        <div class="w-full lg:w-1/2 mb-6 lg:mb-0">
            <div class="bg-white rounded-xl shadow-lg p-4 flex flex-col items-center">
                <div class="w-full h-80 sm:h-96 flex items-center justify-center mb-4">
                    <img id="media-display"
                        src="{{ product.featured_media | img_url: '1024x1024' }}"
                        alt="{{ product.featured_media.alt | escape }}"
                        class="max-h-full max-w-full object-contain rounded-lg transition-opacity duration-300"
                        onerror="this.onerror=null; this.src='https://placehold.co/600x600/f0f0f0/000000?text=Image+Load+Error';"
                    />
                </div>

                <div id="thumbnails-container"
                    class="w-full flex space-x-3 overflow-x-auto no-scrollbar pb-1 justify-start sm:justify-center"
                >
                    {% for media in product.media %}
                        {% assign is_active = false %}
                        {% if product.featured_media.id == media.id %}
                            {% assign is_active = true %}
                        {% endif %}
                        <img src="{{ media.preview_image | img_url: 'medium' }}"
                            alt="{{ media.alt | escape }}"
                            data-full-url="{{ media | img_url: '1024x1024' }}"
                            data-media-id="{{ media.id }}"
                            class="media-thumbnail w-16 h-16 flex-shrink-0 object-cover rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 hover:opacity-100
                                            {% if is_active %}
                                                border-blue-600 border-2 ring-2 ring-blue-600/50 shadow-md
                                            {% else %}
                                                border-gray-300 border opacity-75
                                            {% endif %}"
                            onclick="swapMedia(this, '{{ media | img_url: '1024x1024' }}')"
                        />
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="w-full lg:w-1/2 p-6 border rounded-xl shadow-sm bg-white">

            <h1 class="text-3xl font-extrabold mb-4 text-gray-900">
                {{ product.title }}
            </h1>

            <!-- Price Display - 30% DISCOUNT -->
            <div class="mt-2 mb-6">
                {% comment %} Calculate 30% OFF price (70% of original) {% endcomment %}
                {% assign discounted_price = product.price | times: 0.7 %}
                
                <span class="text-xl font-bold text-gray-900">
                    {{ discounted_price | money }}
                </span>
                <span class="text-base line-through text-gray-500 ml-2">
                    {{ product.price | money }}
                </span>
                <div class="text-sm text-green-600 font-medium mt-1">
                    Save 30%
                </div>
            </div>

            <!-- Smaller Mask Options Section -->
            <div class="mb-6">
                <h3 class="text-base font-semibold text-gray-800 mb-3">Choose Your Package:</h3>
                
                <div class="grid grid-cols-2 gap-3">
                    <!-- Single Mask Option -->
                    <div id="singleMaskOption" class="mask-option relative border-2 border-[#FA8072] rounded-lg p-3 cursor-pointer transition-all duration-200 hover:shadow-md bg-rose-50"
                        data-quantity="1"
                        data-original-price="{{ product.price | money }}"
                        data-discounted-price="{{ discounted_price | money }}"
                        onclick="selectMaskOption(this, 1)">
                        
                        <!-- Selected Indicator -->
                        <div class="absolute -top-2 -right-2 w-5 h-5 bg-[#FA8072] rounded-full flex items-center justify-center">
                            <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>

                        <div class="flex flex-col items-center text-center">
                            <!-- Smaller Mask Image -->
                            <div class="package-image w-12 h-12 mb-2 bg-gray-100 rounded-lg flex items-center justify-center">
                                <img src="{{ 'single.jpg' | asset_url }}" 
                                    alt="Single Face & Neck Mask" 
                                    class="w-10 h-10 object-contain"
                                    onerror="this.style.display='none'">
                                <div class="text-lg font-bold text-gray-700">1x</div>
                            </div>
                            
                            <!-- Option Details -->
                            <h4 class="text-sm font-medium text-gray-900 mb-1">Single Mask</h4>
                            <div class="text-base font-bold text-[#FA8072]">
                                {{ discounted_price | money }}
                            </div>
                            <div class="text-xs line-through text-gray-500">
                                {{ product.price | money }}
                            </div>
                        </div>
                    </div>

                    <!-- Double Mask Option -->
                    <div id="doubleMaskOption" class="mask-option relative border-2 border-gray-200 rounded-lg p-3 cursor-pointer transition-all duration-200 hover:border-[#FA8072] hover:shadow-md"
                        data-quantity="2"
                        data-original-price="{{ product.price | times: 2 | money }}"
                        data-discounted-price="{{ discounted_price | times: 2 | money }}"
                        onclick="selectMaskOption(this, 2)">
                        
                        <!-- Selected Indicator -->
                        <div class="absolute -top-2 -right-2 w-5 h-5 bg-[#FA8072] rounded-full flex items-center justify-center hidden">
                            <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>

                        <div class="flex flex-col items-center text-center">
                            <!-- Smaller Mask Image -->
                            <div class="package-image w-12 h-12 mb-2 bg-gray-100 rounded-lg flex items-center justify-center">
                                <img src="{{ 'double.png' | asset_url }}" 
                                    alt="Two Face & Neck Masks" 
                                    class="w-10 h-10 object-contain"
                                    onerror="this.style.display='none'">
                                    <div class="text-lg font-bold text-gray-700">2x</div>
                            </div>
                            
                            <!-- Option Details -->
                            <h4 class="text-sm font-medium text-gray-900 mb-1">Double Pack</h4>
                            <div class="text-base font-bold text-[#FA8072]">
                                {{ discounted_price | times: 2 | money }}
                            </div>
                            <div class="text-xs line-through text-gray-500">
                                {{ product.price | times: 2 | money }}
                            </div>
                            {% assign save_amount = product.price | times: 2 | minus: discounted_price | times: 2 %}
                            <div class="text-xs text-green-600 font-medium mt-1" data-save-amount="Save {{ save_amount | money }}">
                                Save {{ save_amount | money }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add to Cart Button -->
            <div class="mt-6">
                <button id="addToCartButton" 
                        class="bg-[#FA8072] text-white p-3 rounded-xl w-full text-base font-semibold shadow-md hover:bg-[#E57365] transition duration-200"
                        data-variant-id="{{ product.selected_or_first_available_variant.id }}">
                    Add to Cart - <span class="quantity-text">1 Mask</span>
                </button>
            </div>

        </div>

    </div>

    <div class="bg-white p-8 max-w-7xl mx-auto mt-6 rounded-xl shadow-lg border border-gray-100">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Product Description</h2>
        <div class="text-base leading-relaxed text-gray-600">
            <p class="mb-4">
                Bring professional skincare technology into your home with the <span class="font-semibold text-gray-800 bg-blue-50 px-1 rounded">14™ Silicone Face & Neck Photon Rejuvenation Mask</span>.
            </p>
            <p class="mb-6">
                Designed with ultra-soft, skin-friendly silicone, this mask fits tightly to the contours of your face and neck — ensuring deep light absorption with minimal light leakage. Its flexible, bendable structure makes it comfortable to wear while sitting, lying down, or moving around.
            </p>

            <div class="bg-blue-50 p-5 rounded-lg mb-6">
                <h3 class="text-lg font-semibold mb-3 text-gray-800 flex items-center">
                    <svg class="w-5 h-5 text-blue-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                    </svg>
                    Key Features
                </h3>
                <ul class="space-y-3">
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span><span class="font-medium text-gray-800">Full Coverage:</span> Targeted light therapy across both the face and neck.</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span><span class="font-medium text-gray-800">Lightweight & Thin:</span> Lightweight 0.2 kg design and only 0.3 cm thickness for comfort.</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span><span class="font-medium text-gray-800">Deep Absorption:</span> Soft silicone ensures a tight fit for maximum light effectiveness.</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span><span class="font-medium text-gray-800">Secure Fit:</span> Features an adjustable strap system for a perfect and secure fit for all face shapes.</span>
                    </li>
                </ul>
            </div>
            <p class="mt-4 bg-blue-50 p-4 rounded-lg border-l-4 border-blue-400">
                Whether you're looking to brighten your complexion, reduce the appearance of fine lines, or support healthier, firmer skin, the 14™ mask delivers consistent, targeted light therapy.
            </p>
            </div>
    </div>

    <div class="bg-white p-8 max-w-7xl mx-auto mt-6 rounded-xl shadow-lg border border-gray-100">
        <h2 class="text-3xl font-extrabold text-gray-900 mb-8 text-center">Why Choose Our LED Mask?</h2>

        <div class="w-full mb-10 text-center">
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                Experience revolutionary skincare with our advanced LED Light Therapy Mask. Featuring medical-grade technology in a comfortable, flexible design, our mask delivers professional results from home. Transform your skin with clinically-proven light treatments that are safe, effective, and incredibly easy to use.
            </p>
        </div>

        <div class="w-full flex justify-center">
            <div class="w-full max-w-3xl border border-gray-200 rounded-xl shadow-lg overflow-hidden">
                <div class="grid grid-cols-3 text-sm sm:text-base">

                    <div class="col-span-1 px-4 py-4 text-left font-bold text-black bg-white">Benefit</div>
                    <div class="col-span-1 px-2 py-4 font-bold text-green-700 text-center bg-[#F5F5DC]">
                        Our LED Mask
                    </div>
                    <div class="col-span-1 px-2 py-4 font-bold text-white text-center bg-red-500">Others</div>

                    <div class="col-span-1 px-4 py-4 bg-white text-gray-800 text-left border-t border-gray-200 font-semibold">
                        Stimulate natural cell renewal
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-[#F5F5DC]">
                        <svg class="w-6 h-6 text-green-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-red-100">
                        <svg class="w-6 h-6 text-red-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </svg>
                    </div>

                    <div class="col-span-1 px-4 py-4 bg-white text-gray-800 text-left border-t border-gray-200 font-semibold">
                        Support deep skin hydration
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-[#F5F5DC]">
                        <svg class="w-6 h-6 text-green-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-red-100">
                        <svg class="w-6 h-6 text-red-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </svg>
                    </div>

                    <div class="col-span-1 px-4 py-4 bg-white text-gray-800 text-left border-t border-gray-200 font-semibold">
                        Smooth fine lines and wrinkles
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-[#F5F5DC]">
                        <svg class="w-6 h-6 text-green-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-red-100">
                        <svg class="w-6 h-6 text-red-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </svg>
                    </div>

                    <div class="col-span-1 px-4 py-4 bg-white text-gray-800 text-left border-t border-gray-200 font-semibold">
                        Improve skin tone and clarity
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-[#F5F5DC]">
                        <svg class="w-6 h-6 text-green-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-red-100">
                        <svg class="w-6 h-6 text-red-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </svg>
                    </div>

                    <div class="col-span-1 px-4 py-4 bg-white text-gray-800 text-left border-t border-gray-200 font-semibold">
                        Strengthen skin's natural barrier
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-[#F5F5DC]">
                        <svg class="w-6 h-6 text-green-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div class="col-span-1 px-2 py-4 text-center border-t border-gray-200 bg-red-100">
                        <svg class="w-6 h-6 text-red-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </svg>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="bg-white p-8 max-w-7xl mx-auto mt-6 rounded-xl shadow-lg border border-gray-100 text-center">
        <h2 class="text-3xl font-extrabold text-gray-900 mb-8">
            <span class="text-pink-600">4 Reasons</span> Why You Will Love It:
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <svg class="w-10 h-10 text-blue-600 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <h3 class="font-bold text-lg mb-2 text-gray-800">Fast Results</h3>
                <p class="text-sm text-gray-600">Visible improvement in skin tone and texture within 2 weeks of consistent use.</p>
            </div>
            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <svg class="w-10 h-10 text-blue-600 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5 5 0 0011.5 0L21 7l-3-1m0 0V4a2 2 0 00-2-2H8a2 2 0 00-2 2v2m0 0h12"></path></svg>
                <h3 class="font-bold text-lg mb-2 text-gray-800">Maximum Coverage</h3>
                <p class="text-sm text-gray-600">Designed to treat both the delicate skin on your face and your neck simultaneously.</p>
            </div>
            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <svg class="w-10 h-10 text-blue-600 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.228A9 9 0 005.618 19.228l4.472 2.236a1 1 0 00.82 0l4.472-2.236A9 9 0 0019.618 7.772z"></path></svg>
                <h3 class="font-bold text-lg mb-2 text-gray-800">Non-Invasive</h3>
                <p class="text-sm text-gray-600">A completely pain-free, zero-downtime, and safe alternative to traditional treatments.</p>
            </div>
            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <svg class="w-10 h-10 text-blue-600 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13M3.463 4.29a.862.862 0 011.455.088l5.86 11.72a.862.862 0 001.558 0l5.86-11.72a.862.862 0 011.455-.088l1.378 1.488a.862.862 0 01-.088 1.258l-5.86 11.72a.862.862 0 01-1.558 0l-5.86-11.72a.862.862 0 01-.088-1.258l1.378-1.488z"></path></svg>
                <h3 class="font-bold text-lg mb-2 text-gray-800">Clinically Proven</h3>
                <p class="text-sm text-gray-600">Utilizes the exact same technology trusted by dermatologists and leading spas.</p>
            </div>
        </div>
    </div>

    <div class="flex flex-col lg:flex-row items-center justify-center py-6 gap-8 lg:gap-12 p-8 lg:p-12 bg-gray-50 rounded-xl shadow-sm mx-auto max-w-7xl mt-6">
        <div class="w-full lg:w-1/2 flex justify-center lg:justify-start order-1 lg:order-1">
            <img
                src="{{ 'skin-effact.png' | asset_url }}"
                alt="LED Facial and Neck Mask showing skin rejuvenation benefits"
                width="500"
                height="400"
                loading="lazy"
                class="w-full max-w-[500px] h-auto rounded-lg shadow-md"
            >
        </div>

        <div class="w-full lg:w-1/2 flex-grow max-w-[500px] order-2 lg:order-2">
            <h2 class="font-sans text-2xl lg:text-2xl font-semibold text-gray-800 mb-6 leading-tight text-center lg:text-left">
                Professional-Grade LED Therapy At Home
            </h2>
            <ul class="list-none p-0 m-0">
                <li class="mb-4 flex items-start">
                    <span class="inline-flex items-center justify-center w-5 h-5 bg-blue-600 rounded-full text-white font-bold text-xs mr-3 flex-shrink-0 mt-0.5">✓</span>
                    <div>
                        <strong class="font-sans text-base font-medium text-gray-700 block">Immediate Radiance Enhancement</strong>
                        <p class="font-sans text-sm text-gray-600 mt-1">Achieve a vibrant, youthful complexion with consistent daily treatments.</p>
                    </div>
                </li>
                <li class="mb-4 flex items-start">
                    <span class="inline-flex items-center justify-center w-5 h-5 bg-blue-600 rounded-full text-white font-bold text-xs mr-3 flex-shrink-0 mt-0.5">✓</span>
                    <div>
                        <strong class="font-sans text-base font-medium text-gray-700 block">Deep Cellular Regeneration</strong>
                        <p class="font-sans text-sm text-gray-600 mt-1">Our advanced LED technology works at the cellular level to renew and fortify both facial and neck skin.</p>
                    </div>
                </li>
                <li class="mb-4 flex items-start">
                    <span class="inline-flex items-center justify-center w-5 h-5 bg-blue-600 rounded-full text-white font-bold text-xs mr-3 flex-shrink-0 mt-0.5">✓</span>
                    <div>
                        <strong class="font-sans text-base font-medium text-gray-700 block">Natural Collagen Activation</strong>
                        <p class="font-sans text-sm text-gray-600 mt-1">Stimulate your skin's collagen production for lasting firmness and elasticity.</p>
                    </div>
                </li>
                <li class="flex items-start">
                    <span class="inline-flex items-center justify-center w-5 h-5 bg-blue-600 rounded-full text-white font-bold text-xs mr-3 flex-shrink-0 mt-0.5">✓</span>
                    <div>
                        <strong class="font-sans text-base font-medium text-gray-700 block">Gentle Yet Effective Treatment</strong>
                        <p class="font-sans text-sm text-gray-600 mt-1">Suitable for all skin types, including sensitive skin, with zero downtime or irritation.</p>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div class="bg-white p-8 max-w-7xl mx-auto mt-6 rounded-xl shadow-lg border border-gray-100">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">Verified Customer Stories</h2>

        <div class="grid md:grid-cols-2 gap-6">

            <div class="bg-gray-50 p-6 rounded-lg shadow-inner border border-gray-200">
                <div class="flex items-center mb-3 text-yellow-500">
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                </div>
                <blockquote class="text-gray-700 italic">
                    "Excellent supplier communication and service. The 7-color LED Mask shipment arrived promptly and exactly as described. Very satisfied with the quality of the product."
                </blockquote>
                <p class="mt-4 text-sm font-semibold text-gray-800">- Verified Buyer (Source: Alibaba B2B Review)</p>
            </div>

            <div class="bg-gray-50 p-6 rounded-lg shadow-inner border border-gray-200">
                <div class="flex items-center mb-3 text-yellow-500">
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                    <svg class="w-5 h-5 text-gray-300 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.121-6.545L.487 7.21l6.56-.955L10 0l2.953 6.255 6.56.955-4.756 4.335 1.121 6.545z"/></svg>
                </div>
                <blockquote class="text-gray-700 italic">
                    "High quality material, not cheap plastic. The neck piece is a game changer for me. Setup was simple and the controls are intuitive. Great value for the price!"
                </blockquote>
                <p class="mt-4 text-sm font-semibold text-gray-800">- David L. (Source: Verified Purchase)</p>
            </div>

        </div>

        <p class="mt-8 text-center text-sm text-gray-500">
            Note: For official, real-time reviews, we recommend implementing a dedicated e-commerce review application.
        </p>

    </div>

</div> 

<script>
    // Mask selection functionality
    let selectedQuantity = 1;
    let selectedPackageElement = null;

    function selectMaskOption(element, quantity) {
        // Remove selection from all options
        document.querySelectorAll('.mask-option').forEach(option => {
            option.classList.remove('border-[#FA8072]', 'bg-rose-50');
            option.classList.add('border-gray-200', 'bg-white');
            const checkmark = option.querySelector('.absolute');
            if (checkmark) checkmark.style.display = 'none';
        });

        // Add selection to clicked option
        element.classList.add('border-[#FA8072]', 'bg-rose-50');
        element.classList.remove('border-gray-200', 'bg-white');
        const checkmark = element.querySelector('.absolute');
        if (checkmark) checkmark.style.display = 'flex';

        // Update selected quantity and store selected element
        selectedQuantity = quantity;
        selectedPackageElement = element;

        // Update button text
        const button = document.getElementById('addToCartButton');
        const quantityText = button.querySelector('.quantity-text');
        
        if (quantity === 1) {
            quantityText.textContent = '1 Mask';
        } else {
            quantityText.textContent = '2 Masks';
        }

        // Get the discounted price from the data attribute
        const discountedPrice = element.getAttribute('data-discounted-price');
        
        // Update the main price display (if it exists)
        const priceDisplay = document.querySelector('.mt-2.mb-6');
        if (priceDisplay) {
            const originalPrice = element.getAttribute('data-original-price');
            
            // Create the updated price display
            let priceHTML = `
                <span class="text-xl font-bold text-gray-900">
                    ${discountedPrice}
                </span>
                <span class="text-base line-through text-gray-500 ml-2">
                    ${originalPrice}
                </span>
            `;
            
            // Add save percentage for single mask
            if (quantity === 1) {
                priceHTML += '<div class="text-sm text-green-600 font-medium mt-1">Save 30%</div>';
            }
            // Add save amount for double pack (if available in data attribute)
            else if (element.getAttribute('data-save-amount')) {
                const saveAmount = element.getAttribute('data-save-amount');
                priceHTML += `<div class="text-xs text-green-600 font-medium mt-1">${saveAmount}</div>`;
            }
            
            priceDisplay.innerHTML = priceHTML;
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const singleMaskOption = document.querySelector('.mask-option[data-quantity="1"]');
        if (singleMaskOption) {
            selectMaskOption(singleMaskOption, 1);
            selectedPackageElement = singleMaskOption;
        }
    });

    // Your existing media swap function
    function swapMedia(thumbnail, fullImageUrl) {
        const mediaDisplay = document.getElementById('media-display');
        const thumbnails = document.querySelectorAll('.media-thumbnail');
        
        // Update main image
        mediaDisplay.style.opacity = '0';
        setTimeout(() => {
            mediaDisplay.src = fullImageUrl;
            mediaDisplay.style.opacity = '1';
        }, 150);
        
        // Update thumbnail states
        thumbnails.forEach(thumb => {
            thumb.classList.remove('border-blue-600', 'ring-2', 'ring-blue-600/50', 'shadow-md');
            thumb.classList.add('border-gray-300', 'opacity-75');
        });
        
        // Activate clicked thumbnail
        thumbnail.classList.add('border-blue-600', 'ring-2', 'ring-blue-600/50', 'shadow-md');
        thumbnail.classList.remove('border-gray-300', 'opacity-75');
    }

    // Enhanced Fly-to-Cart Animation - Flies to cart icon in header
    function flyPackageToCart() {
        if (!selectedPackageElement) return;
        
        const packageImage = selectedPackageElement.querySelector('.package-image');
        
        if (!packageImage) {
            console.error('Animation failed: Missing package image element.');
            return;
        }

        // Find cart icon in header - common selectors for Shopify themes
        let cart = document.querySelector('a[href="/cart"], a[href*="cart"], .cart-icon, .header-cart, .site-header__cart, .cart-link');
        
        if (!cart) {
            // Try more specific selectors
            const selectors = [
                'header a[href*="/cart"]',
                '.site-header a[href*="/cart"]',
                'nav a[href*="/cart"]',
                '.header__icons a[href*="/cart"]',
                '[data-cart-icon]',
                '.js-cart-toggle',
                '.cart-toggle'
            ];
            
            for (const selector of selectors) {
                cart = document.querySelector(selector);
                if (cart) break;
            }
        }
        
        if (!cart) {
            console.warn('Cart icon not found. Using header right corner as fallback.');
            // Fallback to top right corner of header
            const header = document.querySelector('header');
            if (header) {
                const headerRect = header.getBoundingClientRect();
                cart = {
                    getBoundingClientRect: () => ({
                        left: headerRect.right - 60,
                        top: headerRect.top + 20,
                        width: 40,
                        height: 40
                    })
                };
            } else {
                // Ultimate fallback: top right of viewport
                cart = { 
                    getBoundingClientRect: () => ({ 
                        left: window.innerWidth - 60, 
                        top: 20, 
                        width: 40, 
                        height: 40 
                    }) 
                };
            }
        }

        // Get positions
        const startRect = packageImage.getBoundingClientRect();
        const endRect = cart.getBoundingClientRect();
        
        // Add scroll position to coordinates
        const scrollX = window.pageXOffset || document.documentElement.scrollLeft;
        const scrollY = window.pageYOffset || document.documentElement.scrollTop;

        // Create flying element (clone the package image)
        const flyingElement = packageImage.cloneNode(true);
        flyingElement.style.position = 'fixed';
        flyingElement.style.width = startRect.width + 'px';
        flyingElement.style.height = startRect.height + 'px';
        flyingElement.style.left = (startRect.left + scrollX) + 'px';
        flyingElement.style.top = (startRect.top + scrollY) + 'px';
        flyingElement.style.zIndex = '10000';
        flyingElement.style.pointerEvents = 'none';
        flyingElement.style.transition = 'all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
        flyingElement.style.borderRadius = '8px';
        flyingElement.style.boxShadow = '0 10px 25px rgba(0,0,0,0.3)';
        flyingElement.style.backgroundColor = 'white'; // Add background for visibility
        
        document.body.appendChild(flyingElement);
        
        // Force reflow
        flyingElement.offsetHeight;
        
        const finalSize = 30; // Slightly larger for visibility

        // Animate to cart icon
        setTimeout(() => {
            // Calculate end position to center on cart icon
            const endX = endRect.left + (endRect.width / 2) - (finalSize / 2) + scrollX;
            const endY = endRect.top + (endRect.height / 2) - (finalSize / 2) + scrollY;
            
            flyingElement.style.left = endX + 'px';
            flyingElement.style.top = endY + 'px';
            flyingElement.style.width = finalSize + 'px';
            flyingElement.style.height = finalSize + 'px';
            flyingElement.style.opacity = '0.9';
            flyingElement.style.transform = 'rotate(360deg) scale(1.1)';
            flyingElement.style.boxShadow = '0 5px 15px rgba(0,0,0,0.3)';
        }, 50);

        // Add bounce effect to cart icon
        if (cart.classList) {
            cart.classList.add('cart-bounce');
            setTimeout(() => {
                if (cart.classList) {
                    cart.classList.remove('cart-bounce');
                }
            }, 1000);
        }

        // Clean up
        setTimeout(() => {
            if (flyingElement.parentNode) {
                flyingElement.parentNode.removeChild(flyingElement);
            }
        }, 1000);
    }

    // Add to Cart with Shopify Integration and Animation
    document.getElementById('addToCartButton').addEventListener('click', function(e) {
        e.preventDefault();
        
        const button = this;
        const variantId = button.getAttribute('data-variant-id');
        const originalText = button.innerHTML;
        
        // Show loading state
        button.innerHTML = 'Adding to Cart...';
        button.disabled = true;
        
        // Trigger fly-to-cart animation
        flyPackageToCart();
        
        // Prepare cart data
        const cartData = {
            items: [{
                id: parseInt(variantId),
                quantity: selectedQuantity
            }]
        };
        
        // Add to cart via Shopify AJAX API
        fetch('/cart/add.js', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(cartData)
        })
        .then(response => response.json())
        .then(data => {
            // Success
            console.log('Product added to cart:', data);
            
            // Update cart count
            updateCartCount(data.item_count || (parseInt(document.querySelector('.cart-count')?.textContent || 0) + selectedQuantity));
            
            // Show success message
            setTimeout(() => {
                button.innerHTML = '✓ Added to Cart!';
                button.style.backgroundColor = '#10B981';
            }, 800);
            
            // Reset button after 2 seconds
            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.backgroundColor = '';
                button.disabled = false;
            }, 2800);
            
        })
        .catch(error => {
            // Error handling
            console.error('Error adding to cart:', error);
            button.innerHTML = 'Error - Try Again';
            button.style.backgroundColor = '#EF4444';
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.backgroundColor = '';
                button.disabled = false;
            }, 2000);
        });
    });

    // Update cart count in header
    function updateCartCount(count) {
        const cartCountElements = document.querySelectorAll('.cart-count, .cart-bubble, .cart-item-count');
        cartCountElements.forEach(element => {
            element.textContent = count;
        });
        
        // Also try to update any badge elements
        const badgeElements = document.querySelectorAll('[data-cart-count], .cart-badge');
        badgeElements.forEach(element => {
            element.textContent = count;
        });
    }

    // Scrollbar hiding styles
    let scrollbarStyle = document.getElementById('scrollbar-style-fix');
    if (!scrollbarStyle) {
        const style = document.createElement('style');
        style.id = 'scrollbar-style-fix';
        style.innerHTML = `
            .no-scrollbar::-webkit-scrollbar { display: none; }
            .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            
            /* Cart bounce animation */
            .cart-bounce {
                animation: cartBounce 0.6s ease-in-out;
            }
            
            @keyframes cartBounce {
                0%, 20%, 60%, 100% { transform: scale(1); }
                40% { transform: scale(1.3); }
                80% { transform: scale(1.1); }
            }
        `;
        document.head.appendChild(style);
    }
</script>