{% comment %} 
  SECTION: MAIN-CART.LIQUID (Creative Layout)
  Colors used: #F5F5DC (Light BG), black (Text/Button BG), #FA8072 (Accent/Button Hover), #0077B6 (Link Hover)
{% endcomment %}

{% if cart.item_count > 0 %}
    
    <div class="p-4 bg-[#F5F5DC]">
        
        <div class="max-w-6xl mx-auto py-10">
            
            <div class="flex items-end justify-between mb-8 pb-4 border-b border-gray-300">
                <h1 class="text-4xl font-bold text-black">Your Bag ({{ cart.item_count }})</h1>
                <a href="{{ routes.all_products_collection_url }}" 
                   class="text-[#0077B6] hover:text-black font-medium underline transition duration-300">
                   Continue shopping
                </a>
            </div>
            
            <form action="{{ routes.cart_url }}" method="POST" novalidate class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <div class="lg:col-span-2 space-y-6">
                    {% for item in cart.items %}
                        {% assign line_item_index = forloop.index %}
                        
                        {# Product Card #}
                        <div class="flex items-start border p-4 bg-white shadow-sm rounded-lg">
                            
                            {# Product Image #}
                            <a href="{{ item.url }}" class="w-24 h-24 sm:w-32 sm:h-32 flex-shrink-0 mr-4">
                                {% if item.image %}
                                    <img src="{{ item | img_url: 'medium' }}" alt="{{ item.title | escape }}" class="w-full h-full object-cover rounded-md">
                                {% else %}
                                    {{ 'product-1' | placeholder_svg_tag: 'w-full h-full object-cover rounded-md border' }}
                                {% endif %}
                            </a>
                            
                            <div class="flex-grow flex flex-col justify-between h-full">
                                <div class="mb-2">
                                    <a href="{{ item.url }}" class="text-lg font-semibold text-black hover:text-[#0077B6]">{{ item.product.title | truncatewords: 6 }}</a>
                                    <p class="text-sm text-gray-600">{{ item.variant.title }}</p>
                                    <p class="text-base font-medium text-black mt-1">{{ item.final_price | money }}</p>
                                </div>
                                
                                <div class="flex items-center justify-between mt-2">

                                    <div class="flex items-center space-x-2">
                                        <label for="updates_{{ line_item_index }}" class="sr-only">Quantity</label>
                                        <input type="number" 
                                               name="updates[]" 
                                               id="updates_{{ line_item_index }}" 
                                               value="{{ item.quantity }}" 
                                               min="1" 
                                               class="w-16 p-2 border border-gray-400 rounded-md text-center text-black focus:ring-[#0077B6] focus:border-[#0077B6]"
                                               aria-label="Quantity for {{ item.title }}">
                                    </div>
                                    
                                    <a href="{{ routes.cart_change_url }}?line={{ line_item_index }}&quantity=0" 
                                       class="text-sm font-medium text-black hover:text-[#FA8072] transition duration-300 underline">
                                       Remove
                                    </a>
                                </div>
                            </div>
                            
                            <div class="hidden sm:block ml-4 text-right">
                                <p class="text-lg font-bold">{{ item.line_price | money }}</p>
                            </div>
                            
                        </div>
                    {% endfor %}

                    <div class="my-4">
                        <label for="cart_notes" class="block text-lg font-medium mb-2 text-black">Order Notes</label>
                        <textarea name="note" id="cart_note" class="w-full resize-none border border-gray-400 rounded-md p-3 h-24 focus:ring-[#0077B6] focus:border-[#0077B6]" placeholder="Add a note to your order... (optional)">{{ cart.note }}</textarea>
                    </div>

                    <div class="text-center md:text-left">
                        <button type="submit" name="update" class="px-6 py-2 border border-black text-black font-medium hover:bg-gray-100 rounded transition duration-300">
                           Update Cart
                        </button>
                    </div>
                </div>
                
                <div class="lg:col-span-1 border p-6 bg-white shadow-md rounded-lg h-min sticky top-4">
                    <h3 class="text-2xl font-semibold mb-4 text-black border-b pb-2">Order Summary</h3>

                    <div class="flex justify-between text-lg font-medium mb-4">
                        <span>Subtotal:</span>
                        <span class="text-black">{{ cart.total_price | money }}</span>
                    </div>

                    <p class="text-sm text-gray-600 mb-6">Shipping and taxes calculated at checkout.</p>
                    
                    <button type="submit" name="checkout" 
                            class="w-full p-3 font-semibold text-[#F5F5DC] bg-black rounded transition duration-300 
                                   hover:bg-[#FA8072] hover:text-black shadow-lg">
                        Proceed to Checkout
                    </button>
                    
                    <div class="mt-4 text-center">
                        <p class="text-sm text-gray-500">Secure checkout powered by Shopify.</p>
                    </div>
                </div>
                
            </form>
        </div>
    </div>

{% else %}
    <div class="max-w-6xl mx-auto py-20 bg-[#F5F5DC] text-center min-h-[50vh] flex flex-col items-center justify-center">
        <h1 class="text-4xl font-bold my-4 text-black">Your bag is empty.</h1>

        <div class="my-6">
            <a href="{{ routes.all_products_collection_url }}" 
               class="px-8 py-3 text-lg font-medium text-black bg-[#FA8072] rounded transition duration-300 
                      hover:bg-[#0077B6] hover:text-white shadow-md">
                Start Shopping Now
            </a>
        </div>
    </div>
{% endif %}