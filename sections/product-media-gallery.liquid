<div class="max-w-7xl mx-auto flex flex-col lg:flex-row lg:justify-between lg:gap-10 mb-8">
    <div class="w-full lg:w-1/2 mb-6 lg:mb-0">
        <div class="bg-white rounded-xl shadow-lg p-4 flex flex-col items-center">
            <div class="w-full h-80 sm:h-96 flex items-center justify-center mb-4">
                <img id="media-display"
                    src="{{ product.featured_media | img_url: '1024x1024' }}"
                    alt="{{ product.featured_media.alt | escape }}"
                    class="max-h-full max-w-full object-contain rounded-lg transition-opacity duration-300"
                    onerror="this.onerror=null; this.src='https://placehold.co/600x600/f0f0f0/000000?text=Image+Load+Error';"
                />
            </div>

            <div id="thumbnails-container"
                class="w-full flex space-x-3 overflow-x-auto no-scrollbar pb-1 justify-start sm:justify-center"
            >
                {% for media in product.media %}
                    {% assign is_active = false %}
                    {% if product.featured_media.id == media.id %}
                        {% assign is_active = true %}
                    {% endif %}
                    <img src="{{ media.preview_image | img_url: 'medium' }}"
                        alt="{{ media.alt | escape }}"
                        data-full-url="{{ media | img_url: '1024x1024' }}"
                        data-media-id="{{ media.id }}"
                        class="media-thumbnail w-16 h-16 flex-shrink-0 object-cover rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 hover:opacity-100
                                        {% if is_active %}
                                            border-blue-600 border-2 ring-2 ring-blue-600/50 shadow-md
                                        {% else %}
                                            border-gray-300 border opacity-75
                                        {% endif %}"
                        onclick="swapMedia(this, '{{ media | img_url: '1024x1024' }}')"
                    />
                {% endfor %}
            </div>
        </div>
    </div>
</div>