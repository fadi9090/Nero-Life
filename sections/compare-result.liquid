{% comment %}
  Compact Layout: Before/After Slider + LED Technology Card
  Equal height sections for desktop, stacked for mobile
{% endcomment %}

<style>
  .split-layout {
    display: flex;
    gap: 2rem;
    width: 100%;
  }
  
  .slider-column {
    flex: 1;
    min-width: 0;
  }
  
  .info-column {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: stretch;
  }
  
  .led-slider {
    position: relative;
    width: 100%;
    border-radius: 12px;
    overflow: hidden;
    background: #f8fafc;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    height: 100%;
  }
  
  .slider-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }
  
  .slider-inner img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .slider-before {
    width: 50%;
    z-index: 2;
    clip-path: inset(0 50% 0 0);
  }
  
  .slider-after {
    z-index: 1;
  }
  
  .slider-line {
    position: absolute;
    top: 0;
    left: 50%;
    height: 100%;
    width: 3px;
    background: white;
    transform: translateX(-50%);
    box-shadow: 0 0 10px rgba(0,0,0,0.4);
    z-index: 3;
  }
  
  .slider-handle {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 40px;
    height: 40px;
    background: white;
    border-radius: 50%;
    cursor: ew-resize;
    z-index: 4;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 3px 10px rgba(0,0,0,0.15);
    transition: all 0.2s ease;
  }
  
  .slider-handle:hover {
    transform: translate(-50%, -50%) scale(1.1);
  }
  
  .slider-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 1rem;
    gap: 0.5rem;
  }
  
  .slider-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: #f8fafc;
    border-radius: 8px;
    font-weight: 500;
    flex: 1;
    justify-content: center;
  }
  
  .label-before {
    color: #dc2626;
  }
  
  .label-after {
    color: #059669;
  }
  
  .label-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }
  
  .label-before .label-dot {
    background: #dc2626;
  }
  
  .label-after .label-dot {
    background: #059669;
  }
  
  /* LED Technology Card */
  .led-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid #e5e7eb;
    height: 100%;
    display: flex;
    flex-direction: column;
  }
  
  .card-header {
    margin-bottom: 1.5rem;
  }
  
  .card-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.25rem;
  }
  
  .card-subtitle {
    font-size: 0.875rem;
    color: #6b7280;
  }
  
  .led-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  
  .led-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem;
    background: #f8fafc;
    border-radius: 8px;
    transition: all 0.2s ease;
  }
  
  .led-item:hover {
    background: #f1f5f9;
    transform: translateX(4px);
  }
  
  .led-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  
  .led-icon-red {
    background: linear-gradient(135deg, #fecaca, #f87171);
  }
  
  .led-icon-blue {
    background: linear-gradient(135deg, #bfdbfe, #60a5fa);
  }
  
  .led-icon-green {
    background: linear-gradient(135deg, #bbf7d0, #4ade80);
  }
  
  .led-icon-yellow {
    background: linear-gradient(135deg, #fef3c7, #f59e0b);
  }
  
  .led-content {
    flex: 1;
  }
  
  .led-title {
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.25rem;
  }
  
  .led-subtitle {
    font-size: 0.875rem;
    color: #6b7280;
    margin-bottom: 0.5rem;
  }
  
  .led-desc {
    font-size: 0.75rem;
    color: #6b7280;
    line-height: 1.4;
  }
  
  /* Stats Section */
  .stats-section {
    margin-top: auto;
    padding-top: 1.5rem;
    border-top: 1px solid #e5e7eb;
  }
  
  .stats-title {
    font-size: 1rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 1rem;
  }
  
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    margin-bottom: 1rem;
  }
  
  .stat-item {
    text-align: center;
  }
  
  .stat-value {
    font-size: 1.125rem;
    font-weight: 600;
    color: #0ea5e9;
    display: block;
  }
  
  .stat-label {
    font-size: 0.75rem;
    color: #6b7280;
    display: block;
  }
  
  .fda-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: #10b981;
    color: white;
    padding: 0.375rem 1rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
  }
  
  .tech-note {
    font-size: 0.75rem;
    color: #6b7280;
    margin-top: 1rem;
    line-height: 1.4;
  }
  
  /* Responsive Design */
  @media (max-width: 768px) {
    .split-layout {
      flex-direction: column;
      gap: 2rem;
    }
    
    .led-slider {
      height: 400px;
    }
    
    .led-card {
      height: auto;
    }
    
    .led-item {
      padding: 0.875rem;
    }
    
    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
</style>

<div class="split-layout mb-8">
  <!-- Left Column: Before/After Slider -->
  <div class="slider-column">
    <div class="led-slider h-[450px] md:h-[500px]" id="ledSlider">
      <div class="slider-inner">
        <img class="slider-after" 
             src="{{ 'after.png' | asset_url }}" 
             alt="After 8 weeks of LED mask treatment"
             onerror="this.style.display='none'">
        
        <img class="slider-before" 
             src="{{ 'before.jpg' | asset_url }}" 
             alt="Before using GlowPro LED mask"
             onerror="this.style.display='none'">
        
        <div class="slider-line" id="sliderLine"></div>
        
        <div class="slider-handle" id="sliderHandle">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#0ea5e9" stroke-width="2">
            <path d="M8 7l4-4 4 4M8 17l4 4 4-4M12 3v18"/>
          </svg>
        </div>
      </div>
    </div>
    
    <div class="slider-labels">
      <div class="slider-label label-before">
        <div class="label-dot"></div>
        <span>Before Treatment</span>
      </div>
      <div class="slider-label label-after">
        <div class="label-dot"></div>
        <span>After 6 Weeks</span>
      </div>
    </div>
  </div>
  
  <!-- Right Column: LED Technology Card -->
  <div class="info-column">
    <div class="led-card w-full">
      <div class="card-header">
        <div class="card-title">Advanced LED Technology</div>
        <div class="card-subtitle">Professional Skin Therapy</div>
      </div>
      
      <div class="led-grid">
        <!-- Red Light -->
        <div class="led-item">
          <div class="led-icon led-icon-red">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2">
              <circle cx="12" cy="12" r="8"/>
              <circle cx="12" cy="12" r="4" fill="#dc2626"/>
            </svg>
          </div>
          <div class="led-content">
            <div class="led-title">Red Light</div>
            <div class="led-subtitle">Anti-Aging</div>
            <div class="led-desc">Stimulates collagen production, reduces fine lines and wrinkles</div>
          </div>
        </div>
        
        <!-- Blue Light -->
        <div class="led-item">
          <div class="led-icon led-icon-blue">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
              <circle cx="12" cy="12" r="8"/>
              <path d="M8 12h8" stroke="#2563eb" stroke-width="2"/>
            </svg>
          </div>
          <div class="led-content">
            <div class="led-title">Blue Light</div>
            <div class="led-subtitle">Acne Treatment</div>
            <div class="led-desc">Eliminates acne-causing bacteria, reduces inflammation</div>
          </div>
        </div>
        
        <!-- Green Light -->
        <div class="led-item">
          <div class="led-icon led-icon-green">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#059669" stroke-width="2">
              <circle cx="12" cy="12" r="8"/>
              <path d="M9 12l2 2 4-4" stroke="#059669" stroke-width="2"/>
            </svg>
          </div>
          <div class="led-content">
            <div class="led-title">Green Light</div>
            <div class="led-subtitle">Brightening</div>
            <div class="led-desc">Reduces pigmentation, evens skin tone, enhances brightness</div>
          </div>
        </div>
        
        <!-- Yellow Light -->
        <div class="led-item">
          <div class="led-icon led-icon-yellow">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#d97706" stroke-width="2">
              <circle cx="12" cy="12" r="8"/>
              <path d="M12 8v8M8 12h8" stroke="#d97706" stroke-width="2"/>
            </svg>
          </div>
          <div class="led-content">
            <div class="led-title">Yellow Light</div>
            <div class="led-subtitle">Calming</div>
            <div class="led-desc">Reduces redness, soothes irritation, improves skin healing</div>
          </div>
        </div>
      </div>
      
      <div class="stats-section">
        <div class="stats-title">Treatment Details</div>
        
        <div class="stats-grid">
          <div class="stat-item">
            <span class="stat-value">10 min/day</span>
            <span class="stat-label">Treatment Time</span>
          </div>
          <div class="stat-item">
            <span class="stat-value">4-6 weeks</span>
            <span class="stat-label">Visible Results</span>
          </div>
          <div class="stat-item">
            <span class="stat-value">150+ LEDs</span>
            <span class="stat-label">LED Count</span>
          </div>
        </div>
        
        <div class="fda-badge">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 6L9 17l-5-5"/>
          </svg>
          <span>FDA Cleared</span>
        </div>
        
        <div class="tech-note">
          Medical-grade LED technology used by dermatologists worldwide
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const slider = document.getElementById('ledSlider');
    const beforeImg = slider.querySelector('.slider-before');
    const line = document.getElementById('sliderLine');
    const handle = document.getElementById('sliderHandle');
    let dragging = false;
    
    function moveSlider(x) {
      const rect = slider.getBoundingClientRect();
      let pos = ((x - rect.left) / rect.width) * 100;
      pos = Math.max(0, Math.min(pos, 100));
      
      beforeImg.style.clipPath = `inset(0 ${100 - pos}% 0 0)`;
      line.style.left = `${pos}%`;
      handle.style.left = `${pos}%`;
    }
    
    // Mouse events
    handle.addEventListener('mousedown', (e) => {
      e.preventDefault();
      dragging = true;
    });
    
    slider.addEventListener('mousedown', (e) => {
      dragging = true;
      moveSlider(e.clientX);
    });
    
    document.addEventListener('mousemove', (e) => {
      if (dragging) moveSlider(e.clientX);
    });
    
    document.addEventListener('mouseup', () => {
      dragging = false;
    });
    
    // Touch events
    handle.addEventListener('touchstart', (e) => {
      e.preventDefault();
      dragging = true;
    });
    
    slider.addEventListener('touchstart', (e) => {
      dragging = true;
      moveSlider(e.touches[0].clientX);
    });
    
    document.addEventListener('touchmove', (e) => {
      if (dragging) {
        e.preventDefault();
        moveSlider(e.touches[0].clientX);
      }
    });
    
    document.addEventListener('touchend', () => {
      dragging = false;
    });
    
    // Initialize
    moveSlider(window.innerWidth / 2);
  });
</script>